var EventCalendarAjaxFilter=function(){return{init:function(){Common.logInfo("EventCalendarAjaxFilter.init..."),0<jQuery("#search_datetimes").length&&jQuery(document).delegate("#search_datetimes","change",EventCalendarAjaxFilter.actions.filtersValueChanged),0<jQuery("#search_location").length&&jQuery(document).delegate("#search_location","change",EventCalendarAjaxFilter.actions.filtersValueChanged),0<jQuery("#search_keywords").length&&jQuery(document).delegate("#search_keywords","change",EventCalendarAjaxFilter.actions.filtersValueChanged),0<jQuery("#search_categories").length&&jQuery(document).delegate("#search_categories","change",EventCalendarAjaxFilter.actions.filtersValueChanged),0<jQuery("#search_event_types").length&&jQuery(document).delegate("#search_event_types","change",EventCalendarAjaxFilter.actions.filtersValueChanged),0<jQuery("#search_ticket_prices").length&&jQuery(document).delegate("#search_ticket_prices","change",EventCalendarAjaxFilter.actions.filtersValueChanged),jQuery(document).delegate("#wpem-event-calendar-layout","click",EventCalendarAjaxFilter.actions.calendarLayoutIconClick),jQuery(document).delegate("#wpem-event-list-layout","click",EventCalendarAjaxFilter.actions.calendarLayoutHide),jQuery(document).delegate("#wpem-event-box-layout","click",EventCalendarAjaxFilter.actions.calendarLayoutHide),jQuery("#event_filters").on("change",EventCalendarAjaxFilter.actions.filtersValueChanged),jQuery(".event_filters").on("click",".reset",EventCalendarAjaxFilter.actions.filtersValueChanged),jQuery(".filter_by_tag_cloud").on("click",EventCalendarAjaxFilter.actions.filtersValueChanged),0<jQuery(".wpem-event-listing-calendar-view").length&&jQuery(window).on("load",EventCalendarAjaxFilter.actions.filtersValueChanged),jQuery("body").on("click","#event_calendar_filters_button",EventCalendarAjaxFilter.actions.getFilteredCalendarData),jQuery("body").on("click","#calendar_navigation_previous",EventCalendarAjaxFilter.actions.getFilteredCalendarData),jQuery("body").on("click","#calendar_navigation_next",EventCalendarAjaxFilter.actions.getFilteredCalendarData),jQuery("body").on("click","#event_calendar_widget_filters_button",EventCalendarAjaxFilter.actions.getFilteredWidgetCalendarData),jQuery("body").on("click","#calendar_widget_navigation_previous",EventCalendarAjaxFilter.actions.getFilteredWidgetCalendarData),jQuery("body").on("click","#calendar_widget_navigation_next",EventCalendarAjaxFilter.actions.getFilteredWidgetCalendarData),EventCalendarAjaxFilter.actions.eventDetailsPopup(),EventCalendarAjaxFilter.actions.showWidgetEventsDetails()},actions:{windowLoad:function(e){Common.logInfo("EventCalendarAjaxFilter.actions.windowLoad..."),0<jQuery(".wpem-event-listing-calendar-view").length&&EventCalendarAjaxFilter.actions.filtersValueChanged(e)},filtersValueChanged:function(e){if(Common.logInfo("EventCalendarAjaxFilter.actions.filtersValueChanged..."),"calendar-layout"==localStorage.getItem("layout")){jQuery("#search_datetimes").val();setTimeout(function(){EventCalendarAjaxFilter.actions.calendarLayoutIconClick(e)},1e3)}},calendarLayoutHide:function(e){Common.logInfo("EventCalendarAjaxFilter.actions.calendarLayoutHide..."),jQuery("#wpem-event-calendar-layout").removeClass("wpem-active-layout"),jQuery(".wpem-event-listings").removeClass("wpem-event-listing-calendar-view"),jQuery("#calendar-layout-view-container").remove(),0<jQuery("#load_more_events").length&&localStorage.getItem("total_event_page")>localStorage.getItem("current_event_page")?jQuery("#load_more_events").show():jQuery("#load_more_events").hide(),jQuery(".event-manager-pagination").show(),e.preventDefault()},calendarLayoutIconClick:function(e){Common.logInfo("EventCalendarAjaxFilter.actions.calendarLayoutIconClick..."),jQuery(".wpem-event-layout-action").find(".wpem-active-layout").removeClass("wpem-active-layout"),jQuery("#wpem-event-calendar-layout").addClass("wpem-active-layout"),jQuery(".wpem-event-box-col").hide(),jQuery("#calendar-layout-view-container").show(),jQuery(".wpem-event-listings").removeClass("wpem-event-listing-list-view"),jQuery(".wpem-event-listings").removeClass("wpem-event-listing-box-view"),jQuery(".wpem-event-listings").hasClass("wpem-row")||jQuery(".wpem-event-listings").addClass("wpem-row"),jQuery(".wpem-event-listings").addClass("wpem-event-listing-calendar-view"),0<jQuery(".load_previous").length?jQuery(".load_previous").hide():0<jQuery("#load_more_events").length&&jQuery("#load_more_events").hide(),jQuery(".event-manager-pagination").hide(),localStorage.setItem("layout","calendar-layout"),EventCalendarAjaxFilter.actions.getCalendarLayoutData(),e.preventDefault()},eventDetailsPopup:function(){jQuery(".calendar-event-details-link").mouseover(function(e){var a=jQuery("#"+e.target.id).children("div").attr("id");jQuery("#"+a).fadeIn("fast")}).mouseout(function(e){var a=jQuery("#"+e.target.id).children("div").attr("id");jQuery("#"+a).fadeOut("fast")})},showWidgetEventsDetails:function(){jQuery(".current_date").on("click",EventCalendarAjaxFilter.actions.ajaxCalanderwidgetCurrentEvent)},getFilteredCalendarData:function(e){Common.logInfo("EventCalendarAjaxFilter.actions.getFilteredCalendarData...");var a=jQuery("#calendar_month").val(),n=jQuery("#calendar_year").val(),t=jQuery("#calendar_navigation_month").val(),r=jQuery("#events_calendar_nonce").val(),l={calendar_month:a,calendar_year:n,calendar_navigation_month:t,calendar_navigation:e.target.id,events_calendar_nonce:r};jQuery.ajax({type:"POST",url:event_manager_calendar_event_calendar_ajax_filters.ajax_url.toString().replace("%%endpoint%%","events_calendar"),data:l,beforeSend:function(){jQuery("#calendar-container").addClass("wpem-loading"),jQuery("#wpem-event-list-layout").prop("disabled",!0),jQuery("#wpem-event-box-layout").prop("disabled",!0)},success:function(e){var a=jQuery("#calendar-container").parent();jQuery("#calendar-container").remove(),jQuery(a).html(e),jQuery("#calendar-container").removeClass("wpem-loading")},error:function(e,a,n){Common.logInfo("Error:"+a),jQuery("#calendar-container").removeClass("wpem-loading")},complete:function(e,a){EventCalendarAjaxFilter.actions.eventDetailsPopup(),jQuery("#calendar-container").removeClass("wpem-loading")}}),jQuery("#wpem-event-list-layout").prop("disabled",!1),jQuery("#wpem-event-box-layout").prop("disabled",!1),e.preventDefault()},getFilteredWidgetCalendarData:function(e){Common.logInfo("EventCalendarAjaxFilter.actions.getFilteredWidgetCalendarData...");var a=jQuery("#calendar_month").val(),n=jQuery("#calendar_year").val(),t=jQuery("#calendar_navigation_month").val(),r=jQuery("#events_calendar_widget_nonce").val(),l={calendar_month:a,calendar_year:n,calendar_navigation_month:t,calendar_navigation:e.target.id,events_calendar_widget_nonce:r};jQuery.ajax({type:"POST",url:event_manager_calendar_event_calendar_ajax_filters.ajax_url.toString().replace("%%endpoint%%","events_calendar_widget"),data:l,beforeSend:function(){jQuery("#calendar-widget-container").addClass("wpem-loading")},success:function(e){var a=jQuery("#calendar-widget-container").parent(),n=jQuery("#calendar-widget-container").index();jQuery("#calendar-widget-container").remove(),jQuery(a).insertAt(n,e),jQuery("#calendar-widget-container").removeClass("wpem-loading")},error:function(e,a,n){Common.logInfo("Error:"+a)},complete:function(e,a){EventCalendarAjaxFilter.actions.eventDetailsPopup(),EventCalendarAjaxFilter.actions.showWidgetEventsDetails(),jQuery("#calendar-widget-container").removeClass("wpem-loading")}}),e.preventDefault()},getCalendarLayoutData:function(){Common.logInfo("EventCalendarAjaxFilter.actions.getCalendarLayoutData...");var e=jQuery("#search_keywords").val(),a=jQuery("#search_location").val(),n=jQuery("#search_datetimes").val(),t=jQuery("#search_categories").val(),r=jQuery("#search_event_types").val(),l=jQuery("#search_ticket_prices").val();if(jQuery("input[name='event_tag[]']").length)var i=jQuery("input[name='event_tag[]']").map(function(){return jQuery(this).val()}).get();else i="";var o={search_keywords:e,search_location:a,search_datetimes:n,search_categories:t,search_event_types:r,search_ticket_prices:l,search_tags:i};jQuery.ajax({type:"POST",url:event_manager_calendar_event_calendar_ajax_filters.ajax_url.toString().replace("%%endpoint%%","events_calendar_layout"),data:o,beforeSend:function(){jQuery("#wpem-event-box-layout").prop("disabled",!0),jQuery("#wpem-event-list-layout").prop("disabled",!0)},success:function(e){jQuery(".event-manager-pagination").hide(),jQuery("#event-listing-view").after().append("<div id='calendar-layout-view-container'>"),jQuery("#calendar-layout-view-container").html(e),jQuery("#wpem-event-box-layout").prop("disabled",!1),jQuery("#wpem-event-list-layout").prop("disabled",!1)},error:function(e,a,n){Common.logInfo("Error: "+a)},complete:function(e,a){EventCalendarAjaxFilter.actions.eventDetailsPopup()}})},ajaxCalanderwidgetCurrentEvent:function(e){if(0<jQuery(this).children(".current_date_event").val().length)var a=jQuery(this).children(".current_date_event").val();else a="";jQuery.ajax({type:"POST",url:event_manager_calendar_event_calendar_ajax_filters.ajax_url,data:{action:"widget_current_event_detail",event_id:a},beforeSend:function(e,a){Common.logInfo("Before send called...")},success:function(e){jQuery("#current_event_container").html(e)},error:function(e,a,n){Common.logInfo("Error in...")},complete:function(e,a){}}),e.preventDefault()}}}};EventCalendarAjaxFilter=EventCalendarAjaxFilter(),jQuery(document).ready(function(e){EventCalendarAjaxFilter.init()}),jQuery.fn.insertAt=function(e,a){var n=this.children().size();return e<0&&(e=Math.max(0,n+1+e)),this.append(a),e<n&&this.children().eq(e).before(this.children().last()),this};